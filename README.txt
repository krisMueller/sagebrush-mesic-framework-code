REPLICATION DATA AND CODE
BEYOND UPLANDS: INTEGRATING RIPARIAN AREAS INTO SAGEBRUSH CONSERVATION DESIGN
================================================================================

COORESPONDING AUTHOR:     Kristopher R. Mueller,
CONTACT:                  kristopher.mueller@mso.umt.edu
YEAR:                     2025
MANUSCRIPT STATUS:        Preprint


1. OVERVIEW & ABSTRACT
================================================================================

This repository contains the data and analytical scripts used to generate the
conservation framework presented in the manuscript "Beyond Uplands." The analysis
integrates riparian (mesic) ecosystem data with the Sagebrush Conservation Design
(SCD) to prioritize watersheds for protection, restoration, and management.

ABSTRACT:
Riparian and mesic habitats are essential biological hotspots in the American
West, supporting 80% of wildlife, yet they are often managed in isolation from
surrounding uplands. To address this, we developed a framework that complements
the Sagebrush Conservation Design to incorporate these habitats into broader land
planning. By analyzing 40 years of riparian vegetation data alongside sagebrush
ecosystems, we classified watersheds into three actionable conservation tiers
based on water availability and vegetation health. This prioritization is
operationalized through the Mesic Analysis Platform, an interactive tool that
identifies stream reaches with floodplain disconnection as key targets for
restoration. Notably, the greatest restoration potential exists on private
lands, where 63-65% of mesic habitats are found. This framework provides a
practical strategy to improve connectivity between vital water resources and the
extensive sagebrush ecosystem.


2. REPOSITORY STRUCTURE
================================================================================

To ensure reproducibility, please maintain the following directory structure.
The R script uses relative paths to locate input data (e.g., "../data/").

[ROOT DIRECTORY]
  |
  +-- README.txt                      (This file)
  +-- LICENSE                         (License agreement)
  |
  +-- data/                           (INPUT DATA - Required for R script)
  |     +-- YYYYMMDD_HUC12_DGO_proportions_Metrics_SHP.shp
  |     +-- YYYYMMDD_HUC12_DGO_proportions_Metrics_SHP.dbf
  |     +-- YYYYMMDD_HUC12_DGO_proportions_Metrics_SHP.shx
  |     +-- YYYYMMDD_HUC12_DGO_proportions_Metrics_SHP.prj
  |     +-- tl_rd22_us_state.shp
  |
  +-- scripts/                        (ANALYSIS CODE)
  |     +-- 01_GEE_Biome_Analysis.js        (Google Earth Engine)
  |     +-- 02_GEE_HUC12_Prioritization.js  (Google Earth Engine)
  |     +-- 03_R_Conservation_Tiers.R       (R Script - Main Analysis)
  |
  +-- outputs/                        (OUTPUTS - Generated by R script)
        +-- figures/                  (Maps and summary plots)
        +-- tables/                   (Summary CSVs)
        +-- spatial/                  (Final classified Shapefile)


3. DATA DICTIONARY
================================================================================

The primary input file (20250626_HUC12_DGO_proportions_Metrics_SHP.shp)
contains aggregated statistics for HUC12 watersheds. Variable names are
abbreviated to meet Shapefile column limits.

VARIABLE   DESCRIPTION
--------   -----------
HUC_ID     Sequential row identifier.
Name       Name of the HUC12 subwatershed.
ArHUCm2    Total area of the HUC12 watershed (m2).
ArVBm2     Total area of the valley bottom / DGO (m2).
PrVPclL    Prop. Valley Bottom with Low Persistence (1-24% productive freq).
PrVPclM    Prop. Valley Bottom with Med Persistence (25-74% productive freq).
PrVPclH    Prop. Valley Bottom with High Persistence (>=75% productive freq).
PrVW5kC    Prop. Valley Bottom within 5km of SCD Core Sagebrush Area.
PrVW5kG    Prop. Valley Bottom within 5km of SCD Growth Opportunity Area.
PrVPu      Prop. Valley Bottom on Public Lands.
PrVPr      Prop. Valley Bottom on Private Lands.


4. METHODOLOGY & LOGIC
================================================================================

The R script ("03_R_Conservation_Tiers.R") classifies watersheds into tiers
using the intersection of Sagebrush Integrity (Core + Growth) and Mesic
Resource Persistence (High/Med/Low).

CLASSIFICATION LOGIC:

TIER 1: PROTECT & MAINTAIN
Threshold: (Core + Growth > 15%) AND (High Persistence > 65%)
Goal:      Protect intact mesic resources near functioning sagebrush uplands.

TIER 2: RESTORE & ENHANCE
Threshold: (Core + Growth > 15%) AND (High Pers. > 15%) AND (Med or Low > 15%)
Goal:      Target areas with water availability but degradation (mixed signals).

TIER 3: STRATEGICALLY MANAGE
Threshold: (Core + Growth > 15%) AND (High + Med Persistence > 15%)
Goal:      Manage limited resources where restoration potential may be lower.

OTHER
Threshold: Fails proximity threshold (>15%) or insufficient mesic vegetation.


5. SOFTWARE & PREREQUISITES
================================================================================

R ANALYSIS (Required to reproduce figures/maps):
- Software: R (tested on v4.3.0+) and RStudio.
- Packages: sf, dplyr, tidyr, ggplot2, patchwork, knitr, scales, forcats.

GOOGLE EARTH ENGINE (GEE) SCRIPTS:
- The JS scripts are provided for methodological transparency.
- They rely on private internal assets (VBET, SCD layers). To run them
  independently, users must point to their own versions of these datasets.
- Note: The required output from the GEE processing step is ALREADY provided
  in the "data/" folder, so running GEE is not required to reproduce the
  figures.

QUICK START:
1. Open "scripts/03_R_Conservation_Tiers.R" in RStudio.
2. Set Working Directory to "Source File Location" (Session -> Set WD).
3. Run the script.


6. OUTPUT FILES
================================================================================

Upon running the R script, the following files are generated in "outputs/":

outputs/spatial/Classified_Watersheds_Tiered.shp
- A biome-wide Shapefile containing the "Tier" attribute for every HUC12.

outputs/figures/Biome_Wide_Tier_Map.png
- High-resolution map of the western U.S. showing conservation tiers.

outputs/figures/State_Summary_[StateName].png
- Individual dashboards for each state (e.g., MT, WY) showing counts & ownership.

outputs/tables/Overall_Summary_Table.csv
- Aggregated area and count statistics for each Tier.